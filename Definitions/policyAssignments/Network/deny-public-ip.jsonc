{
  "$schema": "https://raw.githubusercontent.com/Azure/enterprise-azure-policy-as-code/main/Schemas/policy-assignment-schema.json",
  "nodeName": "/Network/",
  "definitionEntry": {
    "policyName": "deny-public-ip" // coincide con 'name' de la definición
  },
  "assignment": {
    "name": "asg-deny-public-ip",
    "displayName": "Deny public IP on NICs",
    "description": "NICs con IP pública no están permitidas",
    "enforcementMode": "Default"
  },
  "parameters": {},
  "nonComplianceMessages": [
    { "message": "Las NICs con Public IP serán denegadas." }
  ],
  "scope": {
    // despliega en producción (tenant01) a un MG raíz:
    "tenant01": [
      "/providers/Microsoft.Management/managementGroups/<MG-ROOT-ID>"
    ],
    // despliega en dev (epac-dev) a una suscripción:
    "epac-dev": [
      "/subscriptions/<SUBSCRIPTION_ID>"
    ]
  }
}
